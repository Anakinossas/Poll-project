<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>Poll - Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/c20728e86b.js" crossorigin="anonymous"></script>
</head>

<body class="container">
        <h1 class="text-center">ZeroPoll</h1>

<div class="row d-flex flex-column justify-content-center align-items-center mt-5">
    <div class="col-lg-3 g-0 box shadow">
        <form class="m-5 mb-3 needs-validation" method="post" th:action="@{/loggin}">
            <h1 class="text-center">LOGIN</h1>
            <div class="mb-3">
                <label for="username" class="form-label">Email:</label>
                <input type="email" id="username" name="username" class="form-control rounded-0"/>
            </div>
            <div class="mb-3">
                <label for="password" class="form-label">Password:</label>
                <div class="input-group">
                    <input id="password" type="password" class="form-control rounded-0" name="password">
                    <span style="cursor: pointer;" class="input-group-text rounded-0" id="icon-append"><i
                            class="fa-solid fa-eye-slash"></i></span>
                </div>
            </div>
            <div class="d-flex justify-content-center mt-5 mb-5">
                <button type="submit" class="w-50 btn btn-success shadow mb-3">
                    Accedi
                </button>
            </div>
        </form>
    </div>
    <div class="alert alert-danger col-lg-3 mt-3" role="alert" th:if="${param.error != null}">
        <p class="text-center mb-0">Invalid username and password.</p>
    </div>
    <div class="alert alert-info col-lg-3 mt-3" role="alert" th:if="${param.logout != null}">
        <p class="text-center mb-0">Logout successful.</p>
    </div>
    <div class="alert alert-success col-lg-3 mt-3" role="alert" th:if="${param.dataSent != null}">
        <p class="text-center mb-0">Thanks for your help. See you soon...</p>
    </div>
    <div class="alert alert-danger col-lg-3 mt-3" role="alert" th:if="${param.alreadyDone != null}">
        <p class="text-center mb-0">You have already answered to this poll, or it is ended.</p>
    </div>
</div>
</body>
<script>

    const password = document.querySelector('#password');
    const passwordToggle = document.querySelector('#icon-append');
    const iconToggle = document.querySelector(".fa-solid");

    passwordToggle.addEventListener('click', () => {
        if (password.getAttribute('type') === 'password') {
            password.setAttribute('type', 'text');
            iconToggle.classList.remove("fa-eye-slash");
            iconToggle.classList.add("fa-eye");
        } else {
            password.setAttribute('type', 'password');
            iconToggle.classList.remove("fa-eye");
            iconToggle.classList.add("fa-eye-slash");
        }
    });

</script>
</html>